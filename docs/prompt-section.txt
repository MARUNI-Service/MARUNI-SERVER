제 5절 AI 프롬프트 엔지니어링을 통한 응답 품질 개선
5.1 개선 필요성 및 목표
5.1.1. 배경
본 서비스의 핵심은 AI와 어르신 간의 자연스럽고 따뜻한 대화이다. 특히 노인 돌봄 서비스의 특성상 부정적 감정이나 건강 문제에 대한 응답 품질이 서비스 성패를 좌우한다.
초기 시스템은 OpenAI GPT-4o 모델을 기본 설정으로 활용했으나 다음과 같은 한계가 있었다.- 기계적이고 형식적인 응답- 구체적 공감 표현 부족- 할루시네이션(존재하지 않는 이전 대화 언급)5.1.2 개선 목표

목표 항목
목표 수치
측정 방법
부정적 감정 대화 품질
90% 이상
키워드 기반 자동 평가
건강 관련 대화 적절성
95% 이상
의료 조언 회피율
전체 평균 품질
85% 이상
5개 시나리오 평균
할루시네이션 제거
0건
수동 검증


5.1.3 평가 시스템 설계품질 개선을 객관적으로 측정하기 위해 5개의 테스트 시나리오를 설계했다.테스트 시나리오 구성
번호
시나리오 유형
사용자 메시지 예시
평가 요소
1
긍정적 일상 대화
"오늘 날씨가 참 좋네요"
공감, 질문, 친근함
2
부정적 감정 대화
"요즘 혼자 있으니까 외로워요"
공감, 위로,
긍정적 방향
3
건강 관련 대화
"무릎이 좀 아파요"
공감, 관심,
의료조언 회피
4
멀티턴 대화
"오늘도 공원 다녀"오늘도 공원 다녀올까 해요"
이전 대화 언급,
연결성, 질문
5
가족 관련 대화
“시험 결과가 좋게 나왔대요”
대화 기억, 함께 기뻐하기, 추가 질문
  평가 방식:- 각 시나리오당 3개 평가 요소 (총 15점 만점)- 키워드 기반 자동 평가 시스템- Python 자동화 스크립트로 일관성 확보




5.2 단계별 프롬프트 개선5.2.1 Baseline → improved1: 페르소나 도입Baseline 설정: GPT-4o, Temperature 0.7, max-tokens 100, 기본 시스템 프롬프트- 결과: 26.7% (15점 만점 중 4점)improved1 개선: '마루'라는 페르소나 도입, 대화 스타일 정의, 금지 사항 명시- 결과: 73.3% (+175% 개선)- 시나리오 2(부정적 감정) 0점
 5.2.2 improved1-v2: 구체적 가이드라인 추가문제 발견: improved1의 시나리오 2 응답 분석"혼자 계셔서 외로우셨군요. 지난번에 말씀하신 산책을..."→ 할루시네이션, 기계적 공감, 위로 부족개선 방안: 프롬프트에 구체적 예시 추가부정적 감정 표현 시- 구체적 공감: "혼자 계시는 시간이 길어서 외로우실 것 같아요"- 따뜻한 위로: "제가 곁에서 함께 있을게요"- 대화 초대: "오늘 어떤 일이 있으셨는지 이야기 나눠볼까요?"
건강 관련 대화 시:- 공감과 걱정: "무릎이 불편하시다니 걱정되네요"- 일상적 배려: "무리하지 마시고 푹 쉬세요"핵심: 추상적 지시 → 구체적 예시 제공5.2.3 improved1-v3: 파라미터 조정 추가improved1-v2에 Temperature 0.8, max-tokens 120으로 조정하여 약간의 창의성과 풍부한 표현 추가5.3 평가 시스템의 문제와 개선5.3.1 예상 밖의 결과2차 테스트 결과 (기존 평가):- improved1-v3: 73.3% (1위)- improved1: 66.7% (2위)- improved1-v2: 60.0% (3위)문제: 프롬프트를 강화한 v2가 최하위5.3.2 원인 분석improved1-v2의 실제 응답을 읽어보니"혼자 계시는 시간이 길어서 외로우실 것 같아요.제가 곁에서 함께 있을게요."→ 실제 품질에서 큰 차이가 없었다. 그런데 평가 점수: 1/3점 (33%)
평가 시스템의 한계- 키워드 목록 제한적 (평균 4개, 실제 표현의 40%만 커버)- "외로우실"은 키워드에 없음 → 0점- "함께 있을게요"는 키워드에 없음 → 0점- 질문 감지율 50% ("있으셨나요?" 등 미감지)
 5.3.3 평가 시스템 개선
개선 항목
개선 전
개선 후
키워드 수
평균 4개
평균 10개
질문 감지
단순 키워드
정규표현식 15개
점수 체계
0점 / 1점
0/0.00 / 0.5 / 0.7 / 1.0
커버리지
~40%
~85%
5.4 최종 결과5.4.1 3차 테스트 (개선된 평가 시스템)

설정
기존 평가
개선 평가
증가
improved1
66.7%
80.7%
+14.0%
improved-v2
60.0%
93.3%
+33.3%
improved-v3
73.3%
98.0%
+24.7%
  5.4.2 시나리오 2 극적 변화improved1-v2, v3 모두 만점 달성:"혼자 계시는 시간이 길어서 외로우실 것 같아요.제가 곁에서 함께 있을게요.오늘 어떤 일이 있으셨는지 이야기 나눠볼까요?"평가:- 공감 1.0점 (strong: "외로우실")- 위로 1.0점 (strong: "함께 있을게요")- 긍정적 방향 1.0점 (strong: "이야기 나눠볼까요")

 5.5 핵심 인사이트5.5.1 프롬프트 > 파라미터 (7배 차이)

개선 항목
개선 전
개선 후
improved1 → v2
프롬프트만
+33.3%
v2 → v3
파라미터 추가
+4.7%
비율: 33.3% / 4.7% = 7.09배
시사점: LLM 품질 개선은 프롬프트 엔지니어링(70%) > 평가 시스템(20%) > 파라미터 튜닝(10%)
5.6 결론최종 성과:- 품질: 26.7% → 98.0% (267% 개선)- 핵심 시나리오(부정 감정, 건강, 멀티턴, 가족): 모두 만점- 할루시네이션:  80% 감소Production 적용: improved1-v3 (98.0% 성능, $18/월 100명 기준)
